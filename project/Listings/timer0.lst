C51 COMPILER V9.53.0.0   TIMER0                                                            04/17/2019 22:24:39 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE TIMER0
OBJECT MODULE PLACED IN .\Objects\timer0.obj
COMPILER INVOKED BY: D:\keil\C51\BIN\C51.EXE scr\timer0.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(.\inc) DEBUG OBJECTEXTEN
                    -D PRINT(.\Listings\timer0.lst) OBJECT(.\Objects\timer0.obj)

line level    source

   1          #include "project_config.h"
   2          
   3          void (*run)();
   4          uchar step;
   5          //******************************
   6          //              定时器0初始化函数
   7          //作用：初始化定时器0
   8          //******************************
   9          void timer0_Init()
  10          {
  11   1              EA = 1;
  12   1              TMOD = 0x11;
  13   1              ET0 = 1;
  14   1       
  15   1              TH0=(65536-1000)/256;
  16   1              TL0=(65536-1000)%256;
  17   1       
  18   1              TR0=1;
  19   1      }
  20           
  21           
  22          //******************************
  23          //              中断处理函数
  24          //作用：定时器0的中断处理
  25          //******************************
  26          void time0int(void) interrupt 1
  27          {
  28   1              TH0=(65536-1000)/256;
  29   1              TL0=(65536-1000)%256;
  30   1      //    run();
  31   1              count++;
  32   1      //    comlive_time++;
  33   1      //    if(comlive_time>com_dead)
  34   1      //    {
  35   1      //        comlive_time=com_new;
  36   1      //    }
  37   1      }
  38           
  39           
  40          //******************************
  41          //
  42          //延时i ms
  43          //******************************
  44          void delay(uint ims)
  45          {
  46   1              endcount=ims;
  47   1              count=0;
  48   1              do{}while(count<endcount);
  49   1      }
  50           
  51          void Delay500ms()               //@11.0592MHz
  52          {
  53   1              unsigned char i, j, k;
  54   1      
C51 COMPILER V9.53.0.0   TIMER0                                                            04/17/2019 22:24:39 PAGE 2   

  55   1              _nop_();
  56   1              _nop_();
  57   1              i = 22;
  58   1              j = 3;
  59   1              k = 227;
  60   1              do
  61   1              {
  62   2                      do
  63   2                      {
  64   3                              while (--k);
  65   3                      } while (--j);
  66   2              } while (--i);
  67   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    101    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      8    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
