C51 COMPILER V9.53.0.0   PROGRESS                                                          04/17/2019 21:09:16 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE PROGRESS
OBJECT MODULE PLACED IN .\Objects\progress.obj
COMPILER INVOKED BY: D:\keil\C51\BIN\C51.EXE scr\progress.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(.\inc) DEBUG OBJECTEXT
                    -END PRINT(.\Listings\progress.lst) OBJECT(.\Objects\progress.obj)

line level    source

   1          #include "project_config.h"
   2          
   3          uchar Semaphore=0;
   4          u8 comlive_time;
   5          
   6          //Semaphore;//信号量 ：红外和金属检测标志
   7                                 //0：无    1：红外感应到人 2：检测到金属物体
   8          void null()
   9          {
  10   1          
  11   1      }    
  12          void rr()
  13          {
  14   1      //   if(SW1==1)
  15   1      //   {
  16   1             step--;
  17   1             move(step);
  18   1      //   }
  19   1      //   else
  20   1      //   {
  21   1      //       MotorStop();
  22   1      //   }
  23   1      }
  24          void rl()
  25          {
  26   1      //   if(SW2==1)
  27   1      //   {
  28   1             step++;
  29   1             move(step);
  30   1      //   }
  31   1      //   else
  32   1      //   {
  33   1      //       MotorStop();
  34   1      //   }
  35   1      }
  36          
  37          void sence()
  38          {
  39   1          Semaphore=0;
  40   1          if(Metal==1&&((GetADCResult(0)<<2)|ADC_LOW2)<100)
  41   1          {
  42   2              Semaphore=1;
  43   2              TXBUFF[1]=2;
  44   2          }
  45   1          if(Metal==0&&((GetADCResult(0)<<2)|ADC_LOW2)>100)
  46   1          {
  47   2              Semaphore=2;
  48   2              TXBUFF[1]=2;
  49   2          }
  50   1          if(Metal==1&&((GetADCResult(0)<<2)|ADC_LOW2)>100)
  51   1          {
  52   2              Semaphore=3;
  53   2              TXBUFF[1]=3;
  54   2          }
C51 COMPILER V9.53.0.0   PROGRESS                                                          04/17/2019 21:09:16 PAGE 2   

  55   1              OLED_ShowNum(5,5,((GetADCResult(0)<<2)|ADC_LOW2),4,16);
  56   1      }
  57          
  58          void remote_control()
  59          {
  60   1          if(RXBUFF[0]!=RXBUFF_L[0])//首先判断收到的指令是否与上一条的相同；当距离上一次RXBUFF_L更新超过5秒时，
  61   1          {                           //RXBUFF_L在定时器中断中清空置零
  62   2              comlive_time=com_new;
  63   2              
  64   2              if(RXBUFF[0]==open)
  65   2              {
  66   3                  //允许通过
  67   3                  //障碍杆下降
  68   3                  run=rl;
  69   3                  comm_pole=pole_down;
  70   3                  step=7;//
  71   3                  OLED_ShowString(36,3,"112",16);
  72   3              }
  73   2              else if(RXBUFF[0]==102)
  74   2              {  
  75   3                  ////禁止通过
  76   3                  ///
  77   3                  run=rr;
  78   3                  comm_pole=pole_up;
  79   3                  step=0;//
  80   3                  OLED_ShowString(36,3,"111",16);
  81   3                  say("英");//tts语音
  82   3              }
  83   2                  *RXBUFF_L=*RXBUFF;
  84   2          }
  85   1          if(KEY1==0)
  86   1          {
  87   2              TXBUFF[0]=command1;
  88   2          }
  89   1          else if(KEY2==0)
  90   1          {
  91   2              TXBUFF[0]=command2;
  92   2          }
  93   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    311    ----
   CONSTANT SIZE    =     11    ----
   XDATA SIZE       =      6    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
